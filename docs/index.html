<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module.exports.html#getAdminRecipients">getAdminRecipients</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#getSectionInstructorRecipient">getSectionInstructorRecipient</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#isAdmin">isAdmin</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#isInstructor">isInstructor</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#isStudent">isStudent</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#send">send</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#sendToAdmins">sendToAdmins</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#sendToSectionInstructor">sendToSectionInstructor</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#.ensureAuthenticated">ensureAuthenticated</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#.forwardIfAuthenticated">forwardIfAuthenticated</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#.isAdmin">isAdmin</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#.isAuthenticated">isAuthenticated</a></li><li data-type='method' style='display: none;'><a href="module.exports.html#.isInstructor">isInstructor</a></li></ul></li><li></li></ul><h3>Modules</h3><ul><li><a href="module-app.html">app</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-app.html#.setviewengine">set view engine</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.use404errorhandler">use 404 error handler</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.usecookieSession">use cookieSession</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.usecors">use cors</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.useejsLayouts">use ejsLayouts</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.usejson">use json</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.usepassport">use passport</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.useurlencoded">use urlencoded</a></li></ul></li><li><a href="module-routes_admin.html">routes/admin</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.DELETE/deleteSection/:id/:length">DELETE /deleteSection/:id/:length</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.GET/resetPtracker">GET /resetPtracker</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.GET/userDelete/:id">GET /userDelete/:id</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.GETadmin/">GET admin/</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.POST/addSection">POST /addSection</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.POST/changeRole">POST /changeRole</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.POST/changeSectionInstructor">POST /changeSectionInstructor</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.POST/deletePtrackerData">POST /deletePtrackerData</a></li><li data-type='method' style='display: none;'><a href="module-routes_admin.html#.POST/siteDelete/:id">POST /siteDelete/:id</a></li></ul></li><li><a href="module-routes_authRoutes.html">routes/authRoutes</a></li><li><a href="module-routes_dataRoutes.html">routes/dataRoutes</a></li><li><a href="module-routes_emailRoutes.html">routes/emailRoutes</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-routes_emailRoutes.html#.POSTemail/changeEmailStatus/:userId">POST email/changeEmailStatus/:userId</a></li><li data-type='method' style='display: none;'><a href="module-routes_emailRoutes.html#.POSTemail/instructorDeleted">POST email/instructorDeleted</a></li><li data-type='method' style='display: none;'><a href="module-routes_emailRoutes.html#.POSTemail/newUser">POST email/newUser</a></li><li data-type='method' style='display: none;'><a href="module-routes_emailRoutes.html#.POSTemail/shiftCreated">POST email/shiftCreated</a></li><li data-type='method' style='display: none;'><a href="module-routes_emailRoutes.html#.POSTemail/shiftDeleted">POST email/shiftDeleted</a></li><li data-type='method' style='display: none;'><a href="module-routes_emailRoutes.html#.POSTemail/shiftUpdated">POST email/shiftUpdated</a></li><li data-type='method' style='display: none;'><a href="module-routes_emailRoutes.html#.POSTemail/userAssignedSection">POST email/userAssignedSection</a></li></ul></li><li><a href="module-routes_indexRoutes.html">routes/indexRoutes</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-routes_indexRoutes.html#~convertMonth">convertMonth</a></li><li data-type='method' style='display: none;'><a href="module-routes_indexRoutes.html#~findMainSite">findMainSite</a></li><li data-type='method' style='display: none;'><a href="module-routes_indexRoutes.html#~findNameOfSite">findNameOfSite</a></li><li data-type='method' style='display: none;'><a href="module-routes_indexRoutes.html#~getShifts">getShifts</a></li></ul></li><li><a href="module-routes_instructorRoutes.html">routes/instructorRoutes</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-routes_instructorRoutes.html#.GETinstructor/">GET instructor/</a></li><li data-type='method' style='display: none;'><a href="module-routes_instructorRoutes.html#.POSTinstructor/changeSection">POST instructor/changeSection</a></li></ul></li><li><a href="module-routes_shiftRoutes.html">routes/shiftRoutes</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-routes_shiftRoutes.html#.DELETE/shifts/delete/:id">DELETE /shifts/delete/:id</a></li><li data-type='method' style='display: none;'><a href="module-routes_shiftRoutes.html#.POST/shifts/">POST /shifts/</a></li><li data-type='method' style='display: none;'><a href="module-routes_shiftRoutes.html#.PUT/shifts/:id">PUT /shifts/:id</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#flashMessages">flashMessages</a></li><li><a href="global.html#main">main</a></li><li><a href="global.html#ndaChecker">ndaChecker</a></li><li><a href="global.html#passUser">passUser</a></li><li><a href="global.html#sectionChecker">sectionChecker</a></li></ul>
    
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>pTracker</h1>
<p>pTracker is a scheduling app for Nursing students to help them track preceptorship shifts at hospitals.
#1</p>
<h2>Usage</h2>
<ul>
<li>see the <a href="./README.md">Usage Guide</a></li>
</ul>
<h2>Structure (after refactoring)</h2>
<ul>
<li><code>auth/</code> - old authentication passport, won't need it as it is being replaced by SAML</li>
<li><code>bin/</code> - application port setup</li>
<li><code>classes/</code> - currently only email class (move to models in the future)</li>
<li><code>controllers/</code> - web app controllers</li>
<li><code>docs/</code> - developer documentation</li>
<li><code>middleware/</code> - web app middleware</li>
<li><code>models/</code> - all the models (user, shift, etc)</li>
<li><code>prisma/</code> - database related files</li>
<li><code>public/</code> - all the static files (css, js, images)</li>
<li><code>routes/</code> - all the routes (api, auth, etc)</li>
<li><code>test/</code> - current app tests</li>
<li><code>test_old/</code> - previous app tests</li>
<li><code>views/</code> - all the ejs templates</li>
<li><code>app.js</code> - main entry point</li>
</ul>
<h2>First steps for developers</h2>
<h3>1. Getting the code and installing the dependencies.</h3>
<ul>
<li>Clone the repo on to your local machine</li>
<li>Open with Visual Studio Code</li>
<li>In the terminal run <code>npm install</code></li>
<li>You are ready to work!!!</li>
</ul>
<h3>2. Developer documentation</h3>
<ul>
<li>To open the documentation, navigate to your local project folder and open <code>docs</code> folder</li>
<li>Open any file</li>
<li>You can now easily navigate through all the comments</li>
</ul>
<p>Note: Documentation will be automatically added as long as you use JSDoc comment format.
To update documentation use <code>npm run docs</code> in the terminal.</p>
<h3>3. GitLab Workflow</h3>
<h4>How to make an issue and merge request + branch (AKA where to start)</h4>
<ol>
<li>New issue in issues tab (appropriately short title but adequate description)</li>
<li>Click on issue and create a merge request (make sure it makes a merge request <strong>and</strong> a branch <strong>not</strong> just branch)</li>
<li>git clone the repo (main)</li>
<li>git checkout {branch} the new branch you just made. (Branch name is under merge request not issues and is not the same as the issue title)
Normally it will have a number followed by the title of the issue like:
<strong>1234-issue-title</strong></li>
<li>Code</li>
</ol>
<p><strong>DO NOT MAKE A LOCAL BRANCH IN THE CLI</strong>
<strong>git checkout -b {branch name} is incorrect</strong></p>
<h4>Before pushing changes, best practice is to pull from main into your local branch</h4>
<ol>
<li>git checkout main</li>
<li>git fetch</li>
<li>git pull</li>
<li>git checkout {your branch}</li>
<li>git merge main</li>
<li>Resolve any merge conflicts</li>
<li>git push</li>
</ol>
<h4>Before merging your branch into main, you <strong>MUST</strong> pull from main into your local branch</h4>
<ol>
<li>git checkout main</li>
<li>git fetch</li>
<li>git pull</li>
<li>git checkout {your branch}</li>
<li>git merge main</li>
<li>Resolve any merge conflicts</li>
<li>git push</li>
<li>Go into merge requests, wait for pipeline to finish,</li>
<li>View your changes and make sure they are correct and will not break production</li>
<li>Ask scrum master to check your work</li>
<li>Merge into main</li>
</ol>
<h2>Development</h2>
<ul>
<li><a href="https://issues.ltc.bcit.ca/web-apps/ptracker">source code repo</a></li>
</ul>
<ol>
<li><code>docker-compose up --build</code></li>
<li>Navigate to <code>http://localhost:8007</code></li>
<li>Login with the first/seed email: <code>dev@bcit.ca</code></li>
</ol>
<h2>Testing</h2>
<ul>
<li>run &quot;npm i mocha&quot;</li>
<li>You can test the app with <code>npm run test</code></li>
</ul>
<h2>Contacts</h2>
<ul>
<li><strong>Sponsor:</strong> Ania Aibin - aaibin@bcit.ca</li>
<li><strong>Technical Operations:</strong> LTC Course Production - courseproduction@bcit.ca</li>
</ul>
<h2>Views</h2>
<p>The following portion will be going over the different views and what they do</p>
<h3>Admin</h3>
<p>The following will be going over each file in the admin folder
What they do and anything noteworthy</p>
<h4>Add Site</h4>
<p>Under <strong>Admin panel</strong>
In the <strong>Sites</strong> tab</p>
<p>You can add more sites that students may possibly be at</p>
<pre class="prettyprint source"><code>This feature is still in development as of 02/16/2023
</code></pre>
<h4>Overview</h4>
<p>This goes over the <strong>Admin Panel</strong></p>
<p><strong>Tab Labels</strong> is a little nav bar that allows you to pick between <em>Users</em>, <em>Instructors</em>, <em>Sites</em> ad <em>Sections</em></p>
<p><em><strong>Users Tab Content</strong></em> is for the users tab</p>
<p>The tr in thead is used for labeling the Name, Role, Section and Delete columns</p>
<p>In the tbody before the tr</p>
<ol>
<li>A for loop is used to check if the users are students</li>
<li>If they are students the for loop will continue and label the students with the appropriate information</li>
<li>If they're a admin or a instructor it'll just display their name and their role</li>
</ol>
<p>The first form in the tr is responsible for assigning the roles as well as changing the roles
- Since it's a admin panel we can change the roles of Students, Instructors and other Admins</p>
<p>The next td after the forms end, checks if the user is a student, if they are they will assign the students to their proper section
- The section the student is under is a way to categorize them by instructor
- Some students that aren't assigned to a section will be in a <strong>Pending Users Section</strong></p>
<p>The next td contains the delete button
- This can be used for removing users that are no longer needed</p>
<p><em><strong>Instructors Tab Content</strong></em></p>
<p>The Instructors tab in admin panel consists of 3 columns
They are :
Instructor
Section
Delete</p>
<p>Just like the students instructors can be assigned to sections, instructors without sections will be in the <strong>Pending Users Section</strong></p>
<p><em><strong>Sites Tab Content</strong></em></p>
<p>Students can be assigned different sites, this tab manages those sites</p>
<p>There are 2 columns for the sites tab as well as a button, the name of the site and the delete button
The button <strong>Add Site</strong> allows more sites to be added, it opens the addsite.ejs file</p>
<p><em><strong>Sections Tab Content</strong></em></p>
<p>The tr in the thead is responsible for naming the 3 columns used for this section
The 3 columns used are:
Name
Instructor
Delete</p>
<p>The Names are the sections, the instructors are the ones assigned to the sections</p>
<p>The for loop in the tbody just adds all existing sections under the names column</p>
<p>The next for loop inside the tbody but in the forms allows for changing the sections</p>
<p>Delete button just deletes</p>
<p><em><strong>Reset Button</strong></em></p>
<p>This will call the resetPtracker.ejs page</p>
<h4>Reset Ptracker</h4>
<p>This will delete all data permanently (Except instructors, admins and sections)</p>
<p>The first div is the button that lets you have the option to delete it</p>
<ol>
<li>The <dialog> and everything inside it will ask you to confirm if you want to delete it</li>
<li>There's a X button to close out of it, there is a comment for it in the code</li>
<li>There's another button inside that asks if you would like to delete it, if it it deleted you will be taken back to admin land</li>
</ol>
<h3>Auth</h3>
<p>This is the authentication folder
It's only login.ejs right now but incase anything else gets added Im pre setting this</p>
<h4>Login</h4>
<p>The form asks for the email and if it's one of the preset ones it'll give you access</p>
<p>This will be changed in the future, but for now it's just these test emails</p>
<p>The preset emails we use are</p>
<p>dev@bcit.ca
instructor_A@bcit.ca
student_1@bcit.ca</p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Fri Mar 31 2023 01:25:01 GMT-0700 (Pacific Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>